!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();module.exports=function(){function View(el){_classCallCheck(this,View),this.el=el}return _createClass(View,[{key:"listenTo",value:function(eventType,selector,listener){var _this=this,elements=this.el.querySelectorAll(selector);Array.prototype.forEach.call(elements,function(elem){elem.addEventListener(eventType,listener.bind(_this))})}},{key:"debounce",value:function(func,wait,immediate){var timeout;return function(){var context=this,args=arguments,later=function(){timeout=null,immediate||func.apply(context,args)},callNow=immediate&&!timeout;clearTimeout(timeout),timeout=setTimeout(later,wait),callNow&&func.apply(context,args)}}}]),View}()},{}],2:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),AppBase=require("./Base.js");module.exports=function(_AppBase){function Gallery(el){_classCallCheck(this,Gallery);var _this=_possibleConstructorReturn(this,(Gallery.__proto__||Object.getPrototypeOf(Gallery)).call(this,el));return _this.imageSelector=".gallery-open",_this.gallerySelector=".gallery-container",_this.contentSelector="main",_this.displaySelector=".modal-image",_this.imageCollection=_this.el.querySelectorAll(".image-div"),_this.currentIndex=0,_this.galleryImageSize=window.innerWidth>640?"large":"med",_this.listenTo("click",_this.imageSelector,_this.openGallery),_this.listenTo("click",".close",_this.closeGallery),_this.listenTo("click",".next",_this.nextImage),_this.listenTo("click",".prev",_this.prevImage),window.addEventListener("keyup",_this.handleKeyUp.bind(_this)),_this}return _inherits(Gallery,_AppBase),_createClass(Gallery,[{key:"openGallery",value:function(e){e.preventDefault();var container=this.el.querySelector(this.gallerySelector),content=this.el.querySelector(this.contentSelector);this.currentIndex=e.target.parentElement.getAttribute("data-order"),this.displayImageInGallery(this.currentIndex),content.classList.add("hide"),container.classList.add("open")}},{key:"closeGallery",value:function(e){e&&e.preventDefault();var content=this.el.querySelector(this.contentSelector),container=this.el.querySelector(this.gallerySelector);this.el.querySelector(".gallery-img");container.querySelector(this.displaySelector).src="",container.querySelector(".caption").innerHTML="",container.classList.remove("open"),content.classList.remove("hide")}},{key:"nextImage",value:function(e){e&&e.preventDefault(),this.currentIndex<this.imageCollection.length-1&&(this.currentIndex++,this.displayImageInGallery(this.currentIndex))}},{key:"prevImage",value:function(e){e&&e.preventDefault(),this.currentIndex>0&&(this.currentIndex--,this.displayImageInGallery(this.currentIndex))}},{key:"handleKeyUp",value:function(e){if(this.el.querySelector(".gallery-container").classList.contains("open"))switch(e.keyCode){case 27:this.closeGallery();break;case 37:this.prevImage();break;case 39:this.nextImage()}}},{key:"displayImageInGallery",value:function(index){var currentImage,images=this.imageCollection,gallery=this.el.querySelector(this.gallerySelector);currentImage=images[index].querySelector("img"),gallery.querySelector(this.displaySelector).src=currentImage.getAttribute("data-src-"+this.galleryImageSize),gallery.querySelector(this.displaySelector).alt=currentImage.alt,gallery.querySelector(".caption").innerHTML=currentImage.alt}}]),Gallery}(AppBase)},{"./Base.js":1}],3:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),AppBase=require("./Base.js");module.exports=function(_AppBase){function LazyLoad(el){_classCallCheck(this,LazyLoad);var _this=_possibleConstructorReturn(this,(LazyLoad.__proto__||Object.getPrototypeOf(LazyLoad)).call(this,el));return _this.images=Array.prototype.slice.call(_this.el.querySelectorAll(".lazy-load")),_this.scrollListener=_this.debounce(_this.loadImages,50).bind(_this),_this.imageSize=_this.getImageSize(),window.addEventListener("DOMContentLoaded",_this.loadImages.bind(_this)),window.addEventListener("scroll",_this.scrollListener),_this}return _inherits(LazyLoad,_AppBase),_createClass(LazyLoad,[{key:"getImageSize",value:function(){window.innerWidth;return window.innerWidth>600?"med":"small"}},{key:"isVisible",value:function(element){var bounds=element.getBoundingClientRect();return bounds.top>0&&bounds.top<window.innerHeight}},{key:"loadImage",value:function(imageEl){imageEl.src=imageEl.getAttribute("data-src-"+this.imageSize),imageEl.classList.remove("lazy-load")}},{key:"loadImages",value:function(){var _this2=this;return 0===this.images.length?void window.removeEventListener("scroll",this.scrollListener):void(this.images=this.images.filter(function(img){return!_this2.isVisible(img)||(_this2.loadImage(img),!1)}))}}]),LazyLoad}(AppBase)},{"./Base.js":1}],4:[function(require,module,exports){"use strict";!function(){var LazyLoadView=require("./LazyLoad.js"),GalleryView=require("./Gallery.js");new LazyLoadView(document.querySelector(".container")),new GalleryView(document.querySelector(".container"))}()},{"./Gallery.js":2,"./LazyLoad.js":3}]},{},[4]);